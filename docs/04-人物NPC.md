# 天下MUD - 人物NPC

## 少林寺NPC

**NPC目录**: `/d/shaolin/npc/`

### 空正 (kongzheng.c)

- **名字**: 空正
- **门派**: 少林寺第37代弟子
- **年龄**: 未知
- **性别**: 男
- **职务**: 负责推荐信考核
- **战斗经验**: 400,000
- **主要属性**:
  - 力量 (str): 40
  - 悟性 (int): 30
- **技能**:
  - 少林长拳 (changquan)
  - 易气诀 (yiqi-force)
  - 干蝉身法 (ganchan)
- **特色**: 可向其索取推荐信进入少林

### 其他少林NPC

少林寺还有众多NPC，包括：
- 各代高僧
- 藏经阁守僧
- 练功房师傅
- 各堂口执事

## 华山派NPC

**NPC目录**: `/d/huashan/npc/`

### 风清扬 (master-feng.c)

- **名字**: 风清扬
- **称号**: "剑法至圣"
- **门派**: 华山派第2代师叔
- **年龄**: 84岁
- **性别**: 男
- **战斗经验**: 7,000,000 (最高级别)
- **主要技能**:
  - 独孤九剑: 300级
  - 紫霞神功: 250级
  - 凌云步法: 300级
- **特殊能力**:
  - 传授独孤九剑的"御剑式"和"挡剑式"
  - 通过"比划"系统教授剑法
- **出现时间**: 特定时段 (1380-300时辰)
- **位置**: 思过崖
- **特色**:
  - 华山剑宗最后传人
  - 独孤九剑集大成者
  - 隐居思过崖多年

### 令狐冲 (master-lh.c)

- **名字**: 令狐冲
- **门派**: 华山派第4代掌门师兄
- **年龄**: 未详
- **性别**: 男
- **特色**:
  - 风清扬的弟子
  - 掌握独孤九剑

### 其他华山NPC

- 岳不群 - 掌门 (第3代)
- 岳灵珊 - 掌门之女
- 劳德诺 - 弟子
- 梁发 - 弟子

## 唐门NPC

**NPC目录**: `/d/tangmen/npc/`

### 唐家长老 (master_zhen)

- **名字**: 唐震
- **门派**: 唐门第16代长老
- **战斗经验**: 800,000
- **职务**: 主要师傅之一
- **特色**: 传授唐门高级武功

### 其他唐门师傅

- **master_yuan** - 唐渊
  - 唐门师傅
  - 传授基础武功

- **master_lai** - 唐莱
  - 唐门师傅
  - 传授中级武功

- **master_bu** - 唐步
  - 唐门师傅
  - 传授特殊技能

### 唐门拜师系统

唐门采用多师傅分级培养系统：
1. 先拜初级师傅学习基础武功
2. 完成所有技能要求后才能拜下一位师傅
3. 最终拜长老学习绝学

## 丐帮NPC

**NPC目录**: `/d/gaibang/npc/`

### 丐帮长老

- **世代**: 第5代
- **等级**: 按袋数划分（一袋到九袋）
- **特色**:
  - 降龙掌传人
  - 打狗棒法传人
  - 乞讨系统管理

## 镜海NPC

**NPC目录**: `/d/jinghai/npc/`

### 镜海门人

- 神秘的门派
- 精通水系武功
- 碧波剑法传承者

## 踏雪山庄NPC

**NPC目录**: `/d/taxue/npc/`

### 庄主及弟子

- **世代**: 第1-2代
- **特色**: 隐世山庄，不轻易收徒

## 通用NPC类型

### 功能性NPC

**钱庄掌柜**:
- **位置**: 各大城市
- **功能**:
  - 兑换货币
  - 存钱取钱
  - 查账
  - 转账
- **文件**: `/d/changan/bank.c` 等

**商店掌柜**:
- **位置**: 各城镇
- **功能**: 买卖物品
- **种类**:
  - 药店
  - 兵器铺
  - 杂货店
  - 书店
  - 当铺

**任务NPC**:
- 发布各种任务
- 给予奖励
- 推动剧情

**普通百姓**:
- 提供信息
- 闲聊
- 增加氛围

### 战斗型NPC

**强盗土匪**:
- 道路上的敌对NPC
- 掉落金钱和物品
- 提供战斗经验

**野兽猛禽**:
- 野外区域
- 不同强度
- 可猎取材料

**守卫**:
- 保护重要区域
- 阻止非法入侵
- 维持治安

## NPC属性系统

### 基础属性

所有NPC都具有以下基础属性：

- **name** - 名字
- **id** - 识别ID
- **long** - 详细描述
- **age** - 年龄
- **gender** - 性别
- **attitude** - 态度 (友好/中立/敌对)
- **combat_exp** - 战斗经验

### 战斗属性

- **str** - 力量/臂力
- **int** - 智力/悟性
- **con** - 体质/根骨
- **dex** - 敏捷/身法
- **kar** - 福缘/机缘
- **per** - 魅力/容貌

### 技能数据

- **skills** - 技能列表及等级
- **skill_map** - 技能映射关系
- **perform** - 特殊招式

### 装备数据

- **weapon** - 武器
- **armor** - 防具
- **inventory** - 物品栏

## NPC互动系统

### 对话系统

- **ask** - 询问NPC关于某事
- **answer** - NPC回答
- **chat** - 随机聊天

### 拜师系统

- **apprentice** - 拜师
- **recruit** - 收徒
- **expell** - 逐出师门

### 学习系统

- **learn** - 向师傅学习技能
- **practice** - 练习技能
- **study** - 研读秘籍

### 比武系统

- **kill** - 攻击NPC
- **fight** - 切磋较量
- **halt** - 停止战斗

### 任务系统

- **accept** - 接受任务
- **complete** - 完成任务
- **abandon** - 放弃任务

## 特殊NPC机制

### 华山独孤九剑传授

风清扬的特殊教学系统：

1. **条件检查**:
   - 悟性必须 >= 31
   - 不能学过华山剑法
   - 必须是华山弟子

2. **学习方式**:
   - 使用"比划"命令 (bihua)
   - 通过实战领悟剑意
   - 逐步掌握各种剑式

3. **Perform技能**:
   - yujian - 御剑式
   - dang - 挡剑式

### 少林推荐信系统

空正的推荐信考核：

1. 玩家向空正索取推荐信
2. 完成考核任务
3. 获得推荐信后可进入少林

### 唐门分级拜师

唐门的多师傅系统：

1. 先拜基础师傅
2. 学满所有要求技能
3. 才能拜更高级的师傅
4. 最终拜见长老

## NPC刷新机制

### 固定NPC

- 师傅、掌门等重要NPC
- 始终存在于固定位置
- 死亡后会重生

### 随机NPC

- 强盗、野兽等
- 在特定区域随机刷新
- 有刷新间隔

### 定时NPC

- 如风清扬在特定时段出现
- 有出现和消失的时间规律

## NPC战斗力等级

根据战斗经验划分：

- **弱小** (< 10,000): 普通百姓、新手弟子
- **入门** (10,000 - 100,000): 初级弟子、小喽啰
- **普通** (100,000 - 400,000): 正式弟子、如空正
- **强大** (400,000 - 800,000): 高级弟子、堂主
- **精英** (800,000 - 2,000,000): 长老级别
- **宗师** (2,000,000+): 掌门、绝顶高手
- **传说** (5,000,000+): 如风清扬

## NPC物品掉落

### 普通掉落

- 金钱 (gold/silver/coin)
- 普通物品
- 食物药品

### 稀有掉落

- 武功秘籍
- 神兵利器
- 特殊材料

### 任务物品

- 推荐信
- 信件
- 任务道具

## NPC总结

游戏中的NPC系统非常完善，包括：

- **门派师傅**: 传授武功，管理门派
- **功能NPC**: 提供服务，如买卖、存储
- **任务NPC**: 发布任务，推动剧情
- **战斗NPC**: 提供战斗练习和经验
- **环境NPC**: 增加游戏氛围

每个NPC都有独特的个性、背景和功能，为玩家创造了一个生动的武侠世界。
